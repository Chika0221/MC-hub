# SwitchPalette

## 概要

MC-Hubは、Vial互換のカスタムキーボードやその他のデバイスを統合的に管理・制御するためのWindows向けデスクトップアプリケーションです。キーマップの変更、マクロの設定・実行、さらには赤外線リモコン信号の管理まで、単一のアプリケーションで直感的に操作できます。

## 主な機能

-   **キーボードカスタマイズ (Vial対応)**
    -   **デバイス自動検出**: PCに接続されたVial互換キーボードを自動的に検出します。
    -   **グラフィカルなキーマップエディタ**: ドラッグ＆ドロップの簡単な操作で、キーボードのレイアウトを視覚的に確認しながらキーマップを自由に変更できます。
    -   **マルチレイヤー対応**: 複数のキーマップレイヤーを切り替えて、それぞれ個別に設定できます。

-   **マクロ機能**
    -   **キー入力トリガー**: 特定のキー入力をトリガーとして、あらかじめ設定したマクロ（一連のキー操作）を実行します。
    -   (将来的な機能) GUIによるマクロの作成・編集。

-   **赤外線リモコン機能 (Beam)**
    -   **コード管理**: Firebase (Firestore) と連携し、赤外線リモコンの信号コードをクラウド上で管理します。
    -   **信号の登録と送信**: 新しいリモコン信号を登録したり、リストから選択して信号を送信したりできます。

-   **その他**
    -   **ウィンドウズネイティブ統合**: タスクトレイに常駐し、バックグラウンドでキー入力を監視します。
    -   **リッチなUI**: Riveアニメーションを活用した、モダンで直感的なユーザーインターフェース。
    -   **(将来的な機能) ワークフロー**: 複数の操作を組み合わせた複雑なタスク自動化。
    -   **(将来的な機能) リモコンページ**: より高度なリモコンインターフェース。

## 画面構成

1.  **デバイス選択ページ**: 接続中のVialキーボードを選択します。
2.  **エディターページ**: キーボードのキーマップを編集します。左にレイヤー選択、中央にキーボードレイアウト、下に割り当て可能なキーの一覧（キーパレット）が表示されます。
3.  **設定ページ**:
    -   **Beam設定**: 赤外線リモコンのコードを管理します。
    -   **リモコン (開発中)**: リモコン操作用のUIです。
    -   **ワークフロー (開発中)**: 自動化タスクを管理するUIです。

## 技術スタック

-   **フレームワーク**: Flutter
-   **言語**: Dart
-   **状態管理**: Riverpod, flutter_hooks
-   **データベース**: Cloud Firestore (Firebase)
-   **非同期処理**: Stream
-   **デスクトップ連携**: bitsdojo_window, tray_manager
-   **デバイス通信**: hid4flutter (HID)
-   **アニメーション**: Rive